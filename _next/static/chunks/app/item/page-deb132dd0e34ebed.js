(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{525:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,D2:()=>o,RM:()=>c,i8:()=>d,vf:()=>m});var s=r(1321),n=r(6317);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/hn",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://news.ycombinator.com/",s={...e},n=new URL(window.location.origin);if(n.pathname="".concat(t,"/user"),n.searchParams.append("id",s.by),s.creatorUrl=n.href,s.url)try{let e=new URL(s.url);s.itemHostname=e.hostname}catch(e){}let a=new URL(window.location.origin);if(a.pathname="".concat(t,"/item"),a.searchParams.append("id",s.id.toString()),s.itemUrl=a.href,r){let e=new URL(r);e.pathname="/item",e.searchParams.append("id",s.id.toString()),s.itemUpstreamUrl=e.href}return s}let l=(0,s.xP)({baseQuery:(0,n.cw)({baseUrl:"https://hacker-news.firebaseio.com/v0/"}),endpoints:e=>({getItem:e.query({query:e=>({url:"/item/".concat(e,".json")}),transformResponse:e=>a(e)}),getItems:e.query({queryFn:async(e,t,r,s)=>{let n=[];for(let t=0;t<e.length;t+=1)n.push(s("item/".concat(e[t],".json")));try{let e=await Promise.allSettled(n),t=[];return e.forEach(e=>{"fulfilled"===e.status&&e.value.data&&t.push(a(e.value.data))}),{data:t}}catch(e){return{error:e}}}}),getTopItems:e.query({queryFn:async(e,t,r,s)=>{let{limit:n,page:l}=e,i=await s("/topstories.json");if(i.error)return{error:i.error};let c=i.data,d=[];for(let e=0,t=(l-1)*n;e<n;e+=1,t+=1)d.push(s("/item/".concat(c[t],".json")));try{let e=await Promise.allSettled(d),t=[];return e.forEach(e=>{"fulfilled"===e.status&&e.value.data&&t.push(a(e.value.data))}),{data:t}}catch(e){return{error:e}}}}),getUser:e.query({query:e=>({url:"/user/".concat(e,".json")})})}),reducerPath:"hnApi"}),i=l,{useGetItemQuery:c,useGetItemsQuery:d,useGetTopItemsQuery:o,useGetUserQuery:m}=l},5507:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),n=r(2821),a=r(2619),l=r.n(a);r(2115);var i=r(309);function c(e){let{className:t="",hnItem:r}=e,a=null;r.itemHostname&&(a=(0,s.jsx)("span",{className:"tw:text-xs",children:" (".concat(r.itemHostname,")")}));let c=null;"score"in r&&(c=(0,s.jsx)("span",{children:"".concat(r.score," points ")}));let d=null;"descendants"in r&&(d=(0,s.jsxs)("span",{children:[" • ",(0,s.jsx)(l(),{href:r.itemUrl,children:"".concat(r.descendants," comments")})]}));let o=null;return"itemUpstreamUrl"in r&&"string"==typeof r.itemUpstreamUrl&&(o=(0,s.jsx)("span",{className:"tw:ml-3",children:(0,s.jsx)(l(),{href:r.itemUpstreamUrl,title:"Open in original HN",children:"☍"})})),(0,s.jsxs)("div",{className:(0,n.A)(t),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"tw:inline-block",children:(0,s.jsx)(l(),{href:r.url||r.itemUrl,children:r.title})}),a]}),(0,s.jsxs)("div",{className:"tw:text-xs tw:text-neutral-400",children:[c,(0,s.jsxs)("span",{children:["by ",(0,s.jsx)(l(),{href:r.creatorUrl,children:"".concat(r.by)})]}),(0,s.jsxs)("span",{children:[" • ",(0,s.jsx)(l(),{href:r.itemUrl,children:(0,s.jsx)(i.A,{date:1e3*r.time})})]}),d,o]})]})}},5934:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var s=r(5155),n=r(4564),a=r(63),l=r(2115),i=r(2821),c=r(2619),d=r.n(c),o=r(309);function m(e){let{className:t="",hnComment:r}=e,a=r.text?(0,n.Parser)().parse(r.text):"",[c,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!0);if(r.deleted)return null;let p=null;r.kids&&r.kids.length>0&&(p=h?(0,s.jsx)("button",{type:"button",className:"tw:text-xs tw:cursor-pointer",title:"Expand",onClick:()=>u(!1),children:"[+]"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"tw:text-xs tw:cursor-pointer",title:"Collapse",onClick:()=>u(!0),children:"[-]"}),(0,s.jsx)(x,{className:"tw:mt-2 tw:ml-1 tw:pl-5 tw:border-dotted tw:border-l tw:border-neutral-500",hnCommentIds:r.kids})]}));let j=c?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hn-item-text tw:overflow-auto",children:a}),p]});return(0,s.jsxs)("div",{className:(0,i.A)(t),children:[(0,s.jsxs)("div",{className:"tw:text-xs tw:text-neutral-400 tw:mb-1",children:[(0,s.jsx)("span",{children:(0,s.jsx)(d(),{href:r.creatorUrl,children:r.by})}),(0,s.jsxs)("span",{children:[" • ",(0,s.jsx)(o.A,{date:1e3*r.time})]}),(0,s.jsx)("button",{type:"button",className:"tw:ml-3 tw:cursor-pointer",title:"".concat(c?"Expand":"Collapse"),onClick:()=>m(!c),children:"[".concat(c?"+":"-","]")})]}),j]})}var h=r(9436),u=r(525);function x(e){let{className:t="",hnCommentIds:r=[]}=e,{data:n=[],error:a,isError:l,isFetching:c,isSuccess:d}=(0,u.i8)(r),o="tw:overflow-y-auto";return c?(0,s.jsx)(h.A,{className:(0,i.A)(t,o),children:"Loading comments"}):d?(0,s.jsx)("div",{className:(0,i.A)(t,o),children:n.map((e,t)=>(0,s.jsx)(m,{className:(0,i.A)({"tw:mt-6":t>0}),hnComment:e},e.id))}):l?(0,s.jsx)("div",{className:(0,i.A)(t,o),children:a.toString()}):null}var p=r(5507);function j(){let e,t=(0,a.useSearchParams)(),{data:r={},error:l,isError:i,isLoading:c,isSuccess:d}=(0,u.RM)(t.get("id")||"");if(!t.get("id"))return(0,s.jsx)("div",{children:"No such item"});let o=(0,s.jsx)("title",{children:"Hacker News Reader"});return r&&r.title&&(o=(0,s.jsx)("title",{children:"".concat(r.title," | ").concat("Hacker News Reader")})),e=c?(0,s.jsx)(h.A,{}):d&&r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{hnItem:r}),r.text?(0,s.jsx)("div",{className:"tw:mt-4 tw:mb-16 tw:text-neutral-300 hn-item-text",children:(0,n.Parser)().parse(r.text)}):null]}):i?(0,s.jsx)("div",{children:l.toString()}):(0,s.jsx)("div",{children:"No such item"}),(0,s.jsxs)(s.Fragment,{children:[o,e,(0,s.jsx)(x,{className:"tw:my-16",hnCommentIds:r.kids||[]})]})}},7790:(e,t,r)=>{Promise.resolve().then(r.bind(r,5934))},9436:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155),n=r(2821);function a(e){let{className:t="",children:r}=e;return(0,s.jsx)("div",{className:(0,n.A)(t,"tw:animate-pulse"),children:r||"Loading"})}r(2115)}},e=>{e.O(0,[321,619,653,441,255,358],()=>e(e.s=7790)),_N_E=e.O()}]);