(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{965:function(e,t,n){Promise.resolve().then(n.bind(n,1370))},7138:function(e,t,n){"use strict";n.d(t,{default:function(){return s.a}});var r=n(231),s=n.n(r)},1370:function(e,t,n){"use strict";n.d(t,{default:function(){return f}});var r=n(7437),s=n(6572),a=n(6463),l=n(2265),i=n(4839),c=n(7138),u=n(3626);function d(e){let{className:t="",hnComment:n}=e,a=n.text?(0,s.Parser)().parse(n.text):"",[d,o]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!0);if(n.deleted)return null;let f=null;n.kids&&n.kids.length>0&&(f=h?(0,r.jsx)("button",{type:"button",className:"tw-text-xs",onClick:()=>x(!1),children:"[+]"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",className:"tw-text-xs",onClick:()=>x(!0),children:"[-]"}),(0,r.jsx)(m,{className:"tw-mt-2 tw-ml-1 tw-pl-5 tw-border-dotted tw-border-l tw-border-neutral-500",hnCommentIds:n.kids})]}));let j=d?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hn-item-text tw-overflow-auto",children:a}),f]});return(0,r.jsxs)("div",{className:(0,i.Z)(t),children:[(0,r.jsxs)("div",{className:"tw-text-xs tw-text-neutral-400 tw-mb-1",children:[(0,r.jsx)("span",{children:(0,r.jsx)(c.default,{href:n.creatorUrl,children:n.by})}),(0,r.jsxs)("span",{children:[" ",(0,r.jsx)(u.Z,{date:1e3*n.time})," "]}),(0,r.jsx)("button",{type:"button",onClick:()=>o(!d),children:"[".concat(d?"+":"-","]")})]}),j]})}var o=n(3934),h=n(2506);function m(e){let{className:t="",hnCommentIds:n=[]}=e,{data:s=[],error:a,isError:l,isFetching:c,isSuccess:u}=(0,h.Qd)(n),m="tw-overflow-y-auto";return c?(0,r.jsx)(o.Z,{className:(0,i.Z)(t,m),children:"Loading comments"}):u?(0,r.jsx)("div",{className:(0,i.Z)(t,m),children:s.map((e,t)=>(0,r.jsx)(d,{className:(0,i.Z)({"tw-mt-6":t>0}),hnComment:e},e.id))}):l?(0,r.jsx)("div",{className:(0,i.Z)(t,m),children:a.toString()}):null}var x=n(2668);function f(){let e;let t=(0,a.useSearchParams)(),{data:n={},error:l,isError:i,isLoading:c,isSuccess:u}=(0,h.DE)(t.get("id")||"");if(!t.get("id"))return(0,r.jsx)("div",{children:"No such item"});let d=(0,r.jsx)("title",{children:"Hacker News Reader"});return n&&n.title&&(d=(0,r.jsx)("title",{children:"".concat(n.title," | ").concat("Hacker News Reader")})),e=c?(0,r.jsx)(o.Z,{}):u&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{hnItem:n}),n.text?(0,r.jsx)("div",{className:"tw-mt-4 tw-mb-16 tw-text-neutral-300 hn-item-text",children:(0,s.Parser)().parse(n.text)}):null]}):i?(0,r.jsx)("div",{children:l.toString()}):(0,r.jsx)("div",{children:"No such item"}),(0,r.jsxs)(r.Fragment,{children:[d,e,(0,r.jsx)(m,{className:"tw-mt-16 tw-mb-6",hnCommentIds:n.kids||[]})]})}},2668:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7437),s=n(4839),a=n(7138);n(2265);var l=n(3626);function i(e){let{className:t="",hnItem:n}=e,i=null;n.itemHostname&&(i=(0,r.jsx)("span",{className:"tw-text-xs",children:" (".concat(n.itemHostname,")")}));let c=null;"score"in n&&(c=(0,r.jsx)("span",{children:"".concat(n.score," points ")}));let u=null;return"descendants"in n&&(u=(0,r.jsxs)("span",{children:[" | ",(0,r.jsx)(a.default,{href:n.itemUrl,children:"".concat(n.descendants," comments")})]})),(0,r.jsxs)("div",{className:(0,s.Z)(t),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"tw-inline-block",children:(0,r.jsx)(a.default,{href:n.url||n.itemUrl,children:n.title})}),i]}),(0,r.jsxs)("div",{className:"tw-text-xs tw-text-neutral-400",children:[c,(0,r.jsxs)("span",{children:["by ",(0,r.jsx)(a.default,{href:n.creatorUrl,children:"".concat(n.by)})]}),(0,r.jsxs)("span",{children:[" ",(0,r.jsx)(a.default,{href:n.itemUrl,children:(0,r.jsx)(l.Z,{date:1e3*n.time})})]}),u]})]})}},3934:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7437),s=n(4839);function a(e){let{className:t="",children:n}=e;return(0,r.jsx)("div",{className:(0,s.Z)(t,"tw-animate-pulse"),children:n||"Loading"})}n(2265)},2506:function(e,t,n){"use strict";n.d(t,{DE:function(){return i},GR:function(){return d},Qd:function(){return c},g:function(){return u}});var r=n(8507),s=n(6074);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/hn",n={...e},r=new URL(window.location.origin);if(r.pathname="".concat(t,"/user"),r.searchParams.append("id",n.by),n.creatorUrl=r.href,n.url)try{let e=new URL(n.url);n.itemHostname=e.hostname}catch(e){}let s=new URL(window.location.origin);return s.pathname="".concat(t,"/item"),s.searchParams.append("id",n.id.toString()),n.itemUrl=s.href,n}let l=(0,r.LC)({baseQuery:(0,s.ni)({baseUrl:"https://hacker-news.firebaseio.com/v0/"}),endpoints:e=>({getItem:e.query({query:e=>({url:"/item/".concat(e,".json")}),transformResponse:e=>a(e)}),getItems:e.query({queryFn:async(e,t,n,r)=>{let s=[];for(let t=0;t<e.length;t+=1)s.push(r("item/".concat(e[t],".json")));try{let e=await Promise.allSettled(s),t=[];return e.forEach(e=>{"fulfilled"===e.status&&e.value.data&&t.push(a(e.value.data))}),{data:t}}catch(e){return{error:e}}}}),getTopItems:e.query({queryFn:async(e,t,n,r)=>{let{limit:s,page:l}=e,i=await r("/topstories.json");if(i.error)return{error:i.error};let c=i.data,u=[];for(let e=0,t=(l-1)*s;e<s;e+=1,t+=1)u.push(r("/item/".concat(c[t],".json")));try{let e=await Promise.allSettled(u),t=[];return e.forEach(e=>{"fulfilled"===e.status&&e.value.data&&t.push(a(e.value.data))}),{data:t}}catch(e){return{error:e}}}}),getUser:e.query({query:e=>({url:"/user/".concat(e,".json")})})}),reducerPath:"hnApi"});t.ZP=l;let{useGetItemQuery:i,useGetItemsQuery:c,useGetTopItemsQuery:u,useGetUserQuery:d}=l}},function(e){e.O(0,[507,231,198,971,23,744],function(){return e(e.s=965)}),_N_E=e.O()}]);